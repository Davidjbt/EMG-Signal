#pragma once
#include <cstdarg>
namespace Eloquent {
    namespace ML {
        namespace Port {
            class SVM {
                public:
                    /**
                    * Predict class for features vector
                    */
                    int predict(float *x) {
                        float kernels[28] = { 0 };
                        float decisions[1] = { 0 };
                        int votes[2] = { 0 };
                        kernels[0] = compute_kernel(x,   5.228766584961  , 3.793333333333  , 4101.0  , 569.0  , 4.182503237695  , 3.106666666667  , 2624.0  , 466.0  , 3.14642654451  , 2.433333333333  , 1485.0  , 365.0  , 4.259107887809  , 3.086666666667  , 2721.0  , 463.0 );
                        kernels[1] = compute_kernel(x,   5.459548210857  , 3.98  , 4471.0  , 597.0  , 4.548259740458  , 3.406666666667  , 3103.0  , 511.0  , 3.61017081775  , 2.673333333333  , 1955.0  , 401.0  , 4.747630988188  , 3.406666666667  , 3381.0  , 511.0 );
                        kernels[2] = compute_kernel(x,   5.154286242213  , 3.78  , 3985.0  , 567.0  , 4.153713198252  , 3.093333333333  , 2588.0  , 464.0  , 3.108054053584  , 2.393333333333  , 1449.0  , 359.0  , 4.196029869611  , 3.06  , 2641.0  , 459.0 );
                        kernels[3] = compute_kernel(x,   6.659329295557  , 3.88  , 6652.0  , 582.0  , 5.208966628165  , 3.453333333333  , 4070.0  , 518.0  , 3.068115599734  , 2.386666666667  , 1412.0  , 358.0  , 4.301937547974  , 2.933333333333  , 2776.0  , 440.0 );
                        kernels[4] = compute_kernel(x,   5.709640969448  , 3.96  , 4890.0  , 594.0  , 5.753839297953  , 3.64  , 4966.0  , 546.0  , 5.770037550427  , 3.053333333333  , 4994.0  , 458.0  , 4.701772715335  , 3.186666666667  , 3316.0  , 478.0 );
                        kernels[5] = compute_kernel(x,   5.987208587202  , 4.126666666667  , 5377.0  , 619.0  , 5.527506972708  , 3.806666666667  , 4583.0  , 571.0  , 3.632262839241  , 2.713333333333  , 1979.0  , 407.0  , 4.99799959984  , 3.486666666667  , 3747.0  , 523.0 );
                        kernels[6] = compute_kernel(x,   5.119895832274  , 3.746666666667  , 3932.0  , 562.0  , 4.140048308897  , 3.06  , 2571.0  , 459.0  , 3.101612483854  , 2.38  , 1443.0  , 357.0  , 4.16493297265  , 3.04  , 2602.0  , 456.0 );
                        kernels[7] = compute_kernel(x,   5.336665625651  , 3.866666666667  , 4272.0  , 580.0  , 4.29029913487  , 3.206666666667  , 2761.0  , 481.0  , 3.091924966748  , 2.36  , 1434.0  , 354.0  , 3.939543120718  , 2.933333333333  , 2328.0  , 440.0 );
                        kernels[8] = compute_kernel(x,   5.270041113059  , 3.786666666667  , 4166.0  , 568.0  , 4.241854940157  , 3.14  , 2699.0  , 471.0  , 3.091924966748  , 2.36  , 1434.0  , 354.0  , 4.014971979977  , 2.973333333333  , 2418.0  , 446.0 );
                        kernels[9] = compute_kernel(x,   6.557438524302  , 4.16  , 6450.0  , 624.0  , 4.72934103937  , 3.393333333333  , 3355.0  , 509.0  , 3.148544637342  , 2.406666666667  , 1487.0  , 361.0  , 4.271611717685  , 3.06  , 2737.0  , 459.0 );
                        kernels[10] = compute_kernel(x,   6.334561284467  , 4.313333333333  , 6019.0  , 647.0  , 6.258327785173  , 3.913333333333  , 5875.0  , 587.0  , 7.267736924243  , 3.526666666667  , 7923.0  , 529.0  , 6.823000317553  , 3.873333333333  , 6983.0  , 581.0 );
                        kernels[11] = compute_kernel(x,   7.202314442826  , 4.593333333333  , 7781.0  , 689.0  , 5.101633725256  , 3.6  , 3904.0  , 540.0  , 3.611094017054  , 2.68  , 1956.0  , 402.0  , 5.177515491688  , 3.54  , 4021.0  , 531.0 );
                        kernels[12] = compute_kernel(x,   6.311893535224  , 4.066666666667  , 5976.0  , 610.0  , 5.80517010948  , 3.82  , 5055.0  , 573.0  , 3.151719107619  , 2.373333333333  , 1490.0  , 356.0  , 3.697747061838  , 2.78  , 2051.0  , 417.0 );
                        kernels[13] = compute_kernel(x,   5.235774377619  , 3.826666666667  , 4112.0  , 574.0  , 4.179314138309  , 3.12  , 2620.0  , 468.0  , 3.134751452136  , 2.413333333333  , 1474.0  , 362.0  , 4.260672873307  , 3.086666666667  , 2723.0  , 463.0 );
                        kernels[14] = compute_kernel(x,   5.224302186257  , 3.813333333333  , 4094.0  , 572.0  , 4.20951303597  , 3.146666666667  , 2658.0  , 472.0  , 3.144307024873  , 2.406666666667  , 1483.0  , 361.0  , 4.066939881533  , 3.006666666667  , 2481.0  , 451.0 );
                        kernels[15] = compute_kernel(x,   6.748827058583  , 3.946666666667  , 6832.0  , 592.0  , 5.527506972708  , 3.486666666667  , 4583.0  , 523.0  , 3.06376674482  , 2.373333333333  , 1408.0  , 356.0  , 4.268489194083  , 2.953333333333  , 2733.0  , 443.0 );
                        kernels[16] = compute_kernel(x,   5.41356321351  , 3.746666666667  , 4396.0  , 562.0  , 4.570193285482  , 3.153333333333  , 3133.0  , 473.0  , 3.435112807464  , 2.28  , 1770.0  , 342.0  , 3.854867053479  , 2.78  , 2229.0  , 417.0 );
                        kernels[17] = compute_kernel(x,   6.670332325554  , 3.866666666667  , 6674.0  , 580.0  , 5.866856057549  , 3.34  , 5163.0  , 501.0  , 3.341656275961  , 2.22  , 1675.0  , 333.0  , 3.307567081708  , 2.446666666667  , 1641.0  , 367.0 );
                        kernels[18] = compute_kernel(x,   5.152345744092  , 3.746666666667  , 3982.0  , 562.0  , 4.036500134192  , 3.013333333333  , 2444.0  , 452.0  , 3.106981386062  , 2.2  , 1448.0  , 330.0  , 3.161223391874  , 2.566666666667  , 1499.0  , 385.0 );
                        kernels[19] = compute_kernel(x,   5.175583702991  , 3.786666666667  , 4018.0  , 568.0  , 3.859188170242  , 2.866666666667  , 2234.0  , 430.0  , 4.426435736948  , 2.58  , 2939.0  , 387.0  , 4.106904755003  , 2.96  , 2530.0  , 444.0 );
                        kernels[20] = compute_kernel(x,   6.593936608734  , 3.84  , 6522.0  , 576.0  , 6.198386886925  , 3.42  , 5763.0  , 513.0  , 3.391164991563  , 2.246666666667  , 1725.0  , 337.0  , 3.361547262794  , 2.46  , 1695.0  , 369.0 );
                        kernels[21] = compute_kernel(x,   6.338243710472  , 4.52  , 6026.0  , 678.0  , 4.833908011813  , 3.82  , 3505.0  , 573.0  , 4.825626038833  , 3.273333333333  , 3493.0  , 491.0  , 7.063049388661  , 4.673333333333  , 7483.0  , 701.0 );
                        kernels[22] = compute_kernel(x,   5.994997914929  , 4.246666666667  , 5391.0  , 637.0  , 5.00199960016  , 3.953333333333  , 3753.0  , 593.0  , 4.140048308897  , 3.046666666667  , 2571.0  , 457.0  , 5.820080182724  , 4.073333333333  , 5081.0  , 611.0 );
                        kernels[23] = compute_kernel(x,   5.395059468316  , 3.853333333333  , 4366.0  , 578.0  , 4.153713198252  , 3.013333333333  , 2588.0  , 452.0  , 3.751444166362  , 2.406666666667  , 2111.0  , 361.0  , 3.822738983155  , 2.853333333333  , 2192.0  , 428.0 );
                        kernels[24] = compute_kernel(x,   6.00111100825  , 4.253333333333  , 5402.0  , 638.0  , 5.07477421501  , 3.993333333333  , 3863.0  , 599.0  , 4.25597619041  , 3.1  , 2717.0  , 465.0  , 5.820080182724  , 4.073333333333  , 5081.0  , 611.0 );
                        kernels[25] = compute_kernel(x,   5.23259018078  , 3.78  , 4107.0  , 567.0  , 3.994996871088  , 2.946666666667  , 2394.0  , 442.0  , 3.653309002352  , 2.413333333333  , 2002.0  , 362.0  , 4.072673159814  , 2.973333333333  , 2488.0  , 446.0 );
                        kernels[26] = compute_kernel(x,   6.012764200709  , 4.286666666667  , 5423.0  , 643.0  , 5.069516742255  , 3.98  , 3855.0  , 597.0  , 4.12795348811  , 3.04  , 2556.0  , 456.0  , 5.829236656716  , 4.1  , 5097.0  , 615.0 );
                        kernels[27] = compute_kernel(x,   6.069047152011  , 3.953333333333  , 5525.0  , 593.0  , 5.073460357586  , 3.286666666667  , 3861.0  , 493.0  , 2.756809750418  , 2.12  , 1140.0  , 318.0  , 3.157002798014  , 2.553333333333  , 1495.0  , 383.0 );
                        float decision = 17.978790153638;
                        decision = decision - ( + kernels[0] * -0.000627512297  + kernels[1] * -0.1  + kernels[2] * -0.1  + kernels[3] * -0.027733651266  + kernels[4] * -0.077376697822  + kernels[5] * -0.1  + kernels[6] * -0.1  + kernels[7] * -0.1  + kernels[8] * -0.1  + kernels[9] * -0.1  + kernels[10] * -0.064969657317  + kernels[11] * -0.076934532734  + kernels[12] * -0.003815910976  + kernels[13] * -0.1  + kernels[14] * -0.012615889081  + kernels[15] * -0.1 );
                        decision = decision - ( + kernels[16] * 0.1  + kernels[17] * 0.1  + kernels[18] * 0.1  + kernels[19] * 0.1  + kernels[20] * 0.1  + kernels[21] * 0.1  + kernels[22] * 0.072124028303  + kernels[23] * 0.1  + kernels[24] * 0.1  + kernels[25] * 0.1  + kernels[26] * 0.091949823191  + kernels[27] * 0.1 );

                        return decision > 0 ? 0 : 1;
                    }

                protected:
                    /**
                    * Compute kernel between feature vector and support vector.
                    * Kernel type: linear
                    */
                    float compute_kernel(float *x, ...) {
                        va_list w;
                        va_start(w, 16);
                        float kernel = 0.0;

                        for (uint16_t i = 0; i < 16; i++) {
                            kernel += x[i] * va_arg(w, double);
                        }

                        return kernel;
                    }
                };
            }
        }
    }